---
layout: page
title:  О проекте
categories: index
---
> Любая достаточно сложная программа содержит заново написанную, неспецифицированную, глючную и медленную реализацию половины какого-либо из диалектов Lisp.
> <br/> <span style="float: right;">Десятое правило Гринспена</span>

**Otus Lisp** (произносится как [\`отэс лисп]), или сокращенно Ol ([\`ол]) - чисто[\*](#pure) функциональный диалект языка Lisp.

Ol реализован как расширенное подмножество Scheme [R<sup>7</sup>RS](http://www.schemers.org/Documents/Standards/R5RS/), включая, но не ограничиваясь, некоторыми из [SRFI](https://r7rs.org). Маленький, встраиваемый и кроссплатформенный; может работать в собственной песочнице (в системах, где песочница поддерживается); предоставляет портабельный, высокоуровневый путь для вызова написанного на других языках кода. Вы можете использовать его под GNU/Linux, Windows, всевозможных Unix, различных BSD, Android, webOS, Minoca и многих других операционных системах на различных (например, x86/x86_64, arm, aarch64, mips, ppc) архитектурах и платформах (ODroid, LattePanda и т.д.).


### Загрузка
Релиз **2.0** вышел и готов к [скачиванию](https://github.com/yuriy-chumak/ol/releases). Приятного ЛИСПинга!

[Sep 2019]: Ведется работа над релизом **2.1**, среди изменений немного приятного синтаксического сахара для векторов (используя []) и словарей (используя {}), обновленный и ускоренный встраиваемый интерфейс, улучшенная реализация под web (через asm.js) и многое другое.


### Протестированные платформы
- [x] x86: 80486, pentium, pentium 2, pentium 3, athlon, core 2 quad, core i3, core i5, core i7.
- [x] x86_64: core 2 quad, core i3, core i5, core i7.
- [x] aarch64: cortex-a53, cortex-a57.
- [x] arm: armv5tejl, armv7l, arm920t, snapdragon 801.
  - nearly planned, but not yet tested: arm926t, arm1136, cortex-a7, cortex-a9, cortex-a15, cortex-m3, cortex-m4.
- [x] powerpc: Mac G4
- [x] mips32: algor (P-5064)
- [x] mips64
- fully supported, but not yet tested: m68k, microblaze, or1k, ppc, ppc64, sh4, spark, spark64, ztensa.

### Протестированные операционные системы/устройства
- [x] GNU/Linux: CentOS, Debian, Fedora, RHEL, SLE, ScientificLinux, Uninvention, openSUSE, Ubuntu.
- [x] Windows: Windows 95, Windows 98, Windows ME, Windows NT, Windows 2000, Windows XP, Windows Vista, Windows 7, Windows 8, Windows 10.
- [x] Unix: OpenBSD, FreeBSD, NetBSD.
- [x] Android: all versions up to Nougat (должны поддерживать все, включая последнюю)
- [x] webOS: 2.0.
- [x] Odroid: [C1+](https://www.hardkernel.com/main/products/prdt_info.php?g_code=G143703355573).
- [x] Minoca [OS](https://www.minocacorp.com/product/).
- [x] [LattePanda](https://www.lattepanda.com/)

### Протестированные веб-браузеры (asm.js версия Ol)
- [x] Iceweasel 38.6.0 / Debian 6.0
- [x] Epiphany 3.4.2 / Debian 6.0
- [x] Chrome (37, 48, etc.) / Debian 6.0
- [x] Luakit 1.8.0 / Ubuntu 9.10
- [x] Opera 58.0.3135.65 / Windows 2008 R2
- [x] SeaMonkey 2.33 / Debian 6.0
- [x] Firefox (28, 36, 44, etc. ) / Debian 6.0
- [x] Chrome (39, 44, 51, 71, etc.) / Windows 2008 R2
- [x] Iceape 2.7.12 / Debian 6.0


### О проекте
Otus Lisp досупен под двумя лицензиями:
[MIT License](https://github.com/yuriy-chumak/ol/blob/master/LICENSE) и
[GNU ](https://github.com/yuriy-chumak/ol/blob/master/COPYING)([L](https://github.com/yuriy-chumak/ol/blob/master/COPYING.LESSER))[GPLv3 License](https://github.com/yuriy-chumak/ol/blob/master/COPYING).

Вот неполный список того, что может вам предоставить Ol:

* маленькая и быстрая [виртуальная машина](?ru/internals/olvm) (всего 42 КБ[\*](#42kb) в бинарном виде)
* высокоэффективный, благодаря чистой функциональности языка, [сборщик мусора](?ru/internals/memory)
* [встраиваемость](?ru/embed),
* кроссплатформенность (Linux, Windows, BSD, Android, webOS, Web, [MacOS, etc. - в реальных ближайших планах])
* поддержка различных архитектур (i586, amd64, arm, mips, etc.)
* поддержка 32- и 64-битных платформ
* возможность компилировать ol-скрипты в бинарный формат; а так же, естественно, выполнять их
* динамическое связывание с функциями из "родных" [системных библиотек](?ru/ffi) напрямую (без использования других языков программирования, таких как C), а так же [обратные вызовы](?ru/pinned) из них же
* числа неограниченной точности (точнее, ограниченной только размером доступной оперативной памяти)
* возможность работать в [песочнице](?ru/sandbox) [\*](#sandbox)
* полный спектр интересных и полезных особенности из мира функционального программирования:
  * продолжения
  * хвостовая рекурсия
  * функции, как объекты первого класса
  * [сопрограммы](?ru/subprograms)
* ограниченные [сеттеры (мутаторы)](?ru/mutators), как маленькое приятное дополнение из императивного мира
* и, что главное, это настоящий, концентрированный, не разбавленный [Lisp](https://ru.wikipedia.org/wiki/%D0%9B%D0%B8%D1%81%D0%BF)!

Вы можете сразу попробовать ol в деле в терминале на этой же страничке без скачивания и установки любых бинарных файлов. Примеры можно посмотреть в конце этой страницы.


### Отличия от R<sup>7</sup>RS

* 6.2.5. Syntax of numerical constants
  * В Ol число c без указания точности считается точным (exact), в r7rs - неточным (inexact)


### Новости разработки <a name="news"></a>
* 2019
  * версия встроенного интерпретатора обновлена до текущей 2.1-2222
  * вышла версия **2.0**, с множеством внутренних изменений, язык стал еще быстрее, еще удобнее и приятнее )
* 2018
  * много изменений, желающие могут проверить историю по [ссылке на гитэхабе](https://github.com/yuriy-chumak/ol/commits/master).

* [Архив новостей](?ru/news)


### Сборка проекта и другие мелочи

Исходный код проекта для самостоятельной сборки, а также инструкции по этому вполне несложному процессу можно забрать из [официального репозирария](https://github.com/yuriy-chumak/ol)
(смотрите секцию BUILD главного README).

Otus Lisp распространяется в виде двух исполняемых бинарных файлов - самостоятельной виртуальной машины (vm для мира Posix, vm.exe для Windows) и интерпретатора Ol (ol и ol.exe соответственно), а так же набора библиотек.
В качестве основной библиотеки выступает repl - реализация языка Otus Lisp поверх базовых примитивов виртуальной машины.

Командные строки для vm и ol совпадают с единственным отличием - виртуальная машина принимает только бинарные (предварительно скомпилированные) скрипты, в то время как интерпретатор принимает и бинарные, и текстовые.

Примеры использования:

* "./vm repl" - запустить интерактивную сессию REPL ("repl" - скомпилированный язык Otus Lisp, лежит в бинарном виде в корневой папке проекта), ждать ввода программы с консоли (клавиатуры)
* "./ol" - аналог "./vm repl"
* "./ol program.scm --seccomp" - выполнить program.scm в песочнице
* "./ol - --seccomp <program.scm - аналог предыдущей команды, выполнить program.scm в песочнице
* "./ol - --home /home/me/ol" - установить путь к библиотекам Otus Lisp в /home/me/ol и запустить интерактивную сессию REPL (если присутствуют аргументы командной строки, то первым всегда должно идти название файла, либо "-" для stdin)


### Мои заметки
* [О бинарных пакетах в NetBSD](?blog/2016.03.17-13.06)
* [Тестируем на 80486](?blog/2017.07.26-15.51)


### [Обучалка](?ru/tutorial)

Например, попробуйте ввести
<pre><code id="fold1" data-language="ol">(fold * 1 (iota 99 1 1))</code><button class="doit" onclick="doit(fold1.textContent)">отправить в терминал.</button></pre>

После нажатия клавиши Enter вы должны получить красивое длинное число - результат вычисления факториала числа 99.

По [ссылке](?ru/tutorial) можно почитать детальнее про проект, а так же как программировать под ol и детали внутренней реализации. В общем все, что касается непосредственно языка и виртуальной машины (документация в процессе наполнения).


### p.s.

* <a name="pure"></a>На самом деле Otus Lisp немного расширен в сторону традиционного императивного программирования, а именно введены лимитированные [мутаторы](?ru/mutators). Мутаторы используются в генераторе псевдослучайных чисел. Кроме того мутаторы могут помочь ускорить типично императивные вещи (например, изменение одного элемента большого списка без копирования его частей).
* <a name="42kb"></a>Для разных операционных систем размер виртуальной машины может различаться как в большую, так и в меньшую стороны (например, для win64 x86_64 - 79 КБ, для ubuntu64 armhf - 30 KB). 42kb - типичный размер для Linux без включения дебаг-информации, ffi и экспериментальной библиотеки поддержки inexact математики (но включая внутренние проверки целостности, сокеты, вызовы "родных" системных функций и песочницу).
* <a name="sandbox"></a>Режим песочницы поддерживается только для операционных систем, в которых реализован [SECCOMP](https://en.wikipedia.org/wiki/Seccomp) (secure computing mode), а это GNU/Linux (и разные его дистрибутивы, Ubuntu, Debian, Suse, etc.). Ведется работа по поддержке песочницы *BSD систем.
